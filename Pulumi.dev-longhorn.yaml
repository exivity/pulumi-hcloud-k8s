config:
  hcloud-k8s:talos:
    image_version: v1.10.3
    kubernetes_version: "1.33.0"
    enable_longhorn: true
    # secretbox_encryption_secret:
    #   secure: AAABAAdOtLY4p9t7B/w/PheN4orhNrnXmwiA+GNArxuK/ufbGqkd5r8E1EZv+NSFoUzEkDt/DC42lQ0IPWN4qQ==
  hcloud-k8s:control_plane:
    node_pools:
      - count: 1
        server_size: cax11
        arch: arm64
        region: fsn1
  hcloud-k8s:firewall:
    vpn_cidrs:
      - "128.140.83.20/32"
      - "2a01:4f8:c013:faa9::/64"
  hcloud-k8s:node_pools:
    node_pools:
      # pool core components like CCM, CSI, AutoScaler, Okteto
      - name: core
        count: 3
        server_size: cpx31
        arch: amd64
        region: fsn1
        labels:
          node-role-system: "true"
        taints:
          - key: node-role-system
            operator: Equal
            value: "true"
            effect: NoSchedule
      # pool for the okteto developer
      - name: okteto-dev-fsn1
        count: 0
        server_size: cx42
        arch: amd64
        region: fsn1
        labels:
          node-role-okteto-dev: "true"
        auto_scaler:
          min_count: 0
          max_count: 3
      - name: okteto-dev-nbg1
        count: 0
        server_size: cx42
        arch: amd64
        region: nbg1
        labels:
          node-role-okteto-dev: "true"
        auto_scaler:
          min_count: 0
          max_count: 3
      - name: okteto-dev-hel1
        count: 0
        server_size: cx42
        arch: amd64
        region: hel1
        labels:
          node-role-okteto-dev: "true"
        auto_scaler:
          min_count: 0
          max_count: 3
  hcloud-k8s:kubernetes:
    hetzner_ccm:
      enabled: true
      version: 1.23.0
      values:
        nodeSelector:
          node-role-system: "true"
        additionalTolerations:
          - key: "node-role-system"
            operator: "Equal"
            value: "true"
            effect: "NoSchedule"
    csi:
      enabled: true
      reclaim_policy: Delete
      is_default_storage_class: false
      version: 2.12.0
      encrypted_secret:
        secure: AAABAP2rjJ0nIOCWz87yx1Vy+5LaWN73Rtub6o05z8N0xh9ty0zVTRjsAEjKm2TLf71+Gi0gEUoLZ6Rhz+3lJxKPtoaSkrH9X88Uikk/yuXsi30FiQyanSSvW4eKgF8k
      values:
        controller:
          nodeSelector:
            node-role-system: "true"
          tolerations:
            - key: "node-role-system"
              operator: "Equal"
              value: "true"
              effect: "NoSchedule"
        node:
          nodeSelector:
            node-role-system: "true"
          tolerations:
            - key: "node-role-system"
              operator: "Equal"
              value: "true"
              effect: "NoSchedule"
    cluster_auto_scaler:
      enabled: true
      version: 9.46.6
      values:
        nodeSelector:
          node-role-system: "true"
        tolerations:
          - key: "node-role-system"
            operator: "Equal"
            value: "true"
            effect: "NoSchedule"
    kubelet_serving_cert_approver:
      enabled: true
      version: v0.9.1
    kubernetes_metrics_server:
      enabled: true
      version: 3.12.2
      values:
        tolerations:
          - key: "node-role-system"
            operator: "Equal"
            value: "true"
            effect: "NoSchedule"
    longhorn:
      enabled: true
      version: 1.8.1
      is_default_storage_class: true
      reclaim_policy: Delete
      values:
        global:
          nodeSelector:
            node-role-system: "true"
          tolerations:
            - key: "node-role-system"
              operator: "Equal"
              value: "true"
              effect: "NoSchedule"
